<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Basic Bar Chart</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">
    /* custom css styles will go here */

    </style>
</head>
<body>
<div id="holder"></div>

    <script src="http://d3js.org/d3.v4.min.js"></script>
    <script>
        //your d3 code will go here
var temperatures = [
  {temp: 32, month: 'January'},
  {temp: 38, month: 'February'},
  {temp: 47, month: 'March'},
  {temp: 59, month: 'April'},
  {temp: 70, month: 'May'},
  {temp: 80, month: 'June'},
  {temp: 84, month: 'July'},
  {temp: 83, month: 'Auguest'},
  {temp: 76, month: 'September'},
  {temp: 64, month: 'October'},
  {temp: 49, month: 'November'},
  {temp: 37, month: 'December'}
];
var months = temperatures.map(function(t) {
  return t.month
});

var margin = {top: 5, right: 5, bottom: 50, left: 50};
// here, we want the full chart to be 700x200, so we determine
// the width and height by subtracting the margins from those values
var fullWidth = 700;
var fullHeight = 200;
// the width and height values will be used in the ranges of our scales
var width = fullWidth - margin.right - margin.left;
var height = fullHeight - margin.top - margin.bottom;
var svg = d3.select('#holder').append('svg')
  .attr('width', fullWidth)
  .attr('height', fullHeight)
  // this g is where the bar chart will be drawn
  .append('g')
    // translate it to leave room for the left and top margins
    .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

// x value determined by month
var monthScale = d3.scaleBand()
  .domain(months)
  .range([0, width])
  .paddingInner(0.1);

// the width of the bars is determined by the scale
var bandwidth = monthScale.bandwidth();

// y value determined by temp
var maxTemp = d3.max(temperatures, function(d) { return d.temp; });
var tempScale = d3.scaleLinear()
  .domain([0, maxTemp])
  .range([height, 0])
  .nice();

var xAxis = d3.axisBottom(monthScale);
var yAxis = d3.axisLeft(tempScale);

// draw the axes
svg.append('g')
  .classed('x axis', true)
  .attr('transform', 'translate(0,' + height + ')')
  .call(xAxis);

var yAxisEle = svg.append('g')
  .classed('y axis', true)
  .call(yAxis);

// add a label to the yAxis
var yText = yAxisEle.append('text')
  .attr('transform', 'rotate(-90)translate(-' + height/2 + ',0)')
  .style('text-anchor', 'middle')
  .style('fill', 'black')
  .attr('dy', '-2.5em')
  .style('font-size', 14)
  .text('Fahrenheit');

var barHolder = svg.append('g')
  .classed('bar-holder', true);

// draw the bars
var bars = barHolder.selectAll('rect.bar')
    .data(temperatures)
  .enter().append('rect')
    .classed('bar', true)
    .attr('x', function(d, i) {
      // the x value is determined using the
      // month of the datum
      return monthScale(d.month)
    })
    .attr('width', bandwidth)
    .attr('y', function(d) {
      // the y position is determined by the datum's temp
      // this value is the top edge of the rectangle
      return tempScale(d.temp);
    })
    .attr('height', function(d) {
      // the bar's height should align it with the base of the chart (y=0)
      return height - tempScale(d.temp);
    });

function convert() {
  // convert temperatures between celsius and fahrenheit
  var converter = isCelsius ? toFahrenheit : toCelsius;
  yText.text(isCelsius ? 'Fahrenheit' : 'Celsius')
  isCelsius = !isCelsius;
  temperatures.forEach(function(t) {
    t.temp = converter(t.temp);
  });

  // redraw the bars
  bars
    .transition()
      .duration(2500)   
      .attr('y', function(d) {
        return tempScale(d.temp);
      })
      .attr('height', function(d) {
        return height - tempScale(d.temp);
      })
}

function toCelsius(f) {
  return (f-32)*5/9;
}

function toFahrenheit(c) {
  return c*9/5 + 32;
}

setInterval(convert, 5000);


    </script>
</body>
</html>